<!-- <header>
    <nav>
        <ul>
            <li><a routerLink="/Search" href="\">Search</a></li>
            <li><a routerLink="/pledge" href="\pledge">Pledge Bill</a></li>
            <li><a routerLink="/redeem" href="\redeem">Redeem Bill</a></li>
            <li><a routerLink="/print" href="\print">Print</a></li>
            <li><a routerLink="/ledger" href="\ledger">Ledger</a></li>
            <li><a routerLink="/setting" href="\setting">Settings</a></li>
            
        </ul>
    </nav>
</header> -->
<app-header ></app-header>
<!-- HTML -->
<div class="filterhead">
 


  <div class="filter">
<div class="toggle-container">
  <input
  class="toggle-input" id="checkbox" type="checkbox" [(ngModel)]="isSearchDate" (click)="toggle()" > 
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 292 142" class="toggle">
    <path d="M71 142C31.7878 142 0 110.212 0 71C0 31.7878 31.7878 0 71 0C110.212 0 119 30 146 30C173 30 182 0 221 0C260 0 292 31.7878 292 71C292 110.212 260.212 142 221 142C181.788 142 173 112 146 112C119 112 110.212 142 71 142Z" class="toggle-background"></path>
    <rect rx="6" height="64" width="12" y="39" x="64" class="toggle-icon on"></rect>
    <path d="M221 91C232.046 91 241 82.0457 241 71C241 59.9543 232.046 51 221 51C209.954 51 201 59.9543 201 71C201 82.0457 209.954 91 221 91ZM221 103C238.673 103 253 88.6731 253 71C253 53.3269 238.673 39 221 39C203.327 39 189 53.3269 189 71C189 88.6731 203.327 103 221 103Z" fill-rule="evenodd" class="toggle-icon off"></path>
    <g filter="url('#goo')">
      <rect fill="#fff" rx="29" height="58" width="116" y="42" x="13" class="toggle-circle-center"></rect>
      <rect fill="#fff" rx="58" height="114" width="114" y="14" x="14" class="toggle-circle left"></rect>
      <rect fill="#fff" rx="58" height="114" width="114" y="14" x="164" class="toggle-circle right"></rect>
    </g>
    <filter id="goo">
      <feGaussianBlur stdDeviation="10" result="blur" in="SourceGraphic"></feGaussianBlur>
      <feColorMatrix result="goo" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" mode="matrix" in="blur"></feColorMatrix>
    </filter>
  </svg>
</div>
<div>Search by Date</div>
</div>

    <div class="filter">
    <div class="toggle-container">
      <input type="checkbox" class="toggle-input" [(ngModel)]="isSearchDateAlso" (click)="toggle1()">   
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 292 142" class="toggle">
        <path d="M71 142C31.7878 142 0 110.212 0 71C0 31.7878 31.7878 0 71 0C110.212 0 119 30 146 30C173 30 182 0 221 0C260 0 292 31.7878 292 71C292 110.212 260.212 142 221 142C181.788 142 173 112 146 112C119 112 110.212 142 71 142Z" class="toggle-background"></path>
        <rect rx="6" height="64" width="12" y="39" x="64" class="toggle-icon on"></rect>
        <path d="M221 91C232.046 91 241 82.0457 241 71C241 59.9543 232.046 51 221 51C209.954 51 201 59.9543 201 71C201 82.0457 209.954 91 221 91ZM221 103C238.673 103 253 88.6731 253 71C253 53.3269 238.673 39 221 39C203.327 39 189 53.3269 189 71C189 88.6731 203.327 103 221 103Z" fill-rule="evenodd" class="toggle-icon off"></path>
        <g filter="url('#goo')">
          <rect fill="#fff" rx="29" height="58" width="116" y="42" x="13" class="toggle-circle-center"></rect>
          <rect fill="#fff" rx="58" height="114" width="114" y="14" x="14" class="toggle-circle left"></rect>
          <rect fill="#fff" rx="58" height="114" width="114" y="14" x="164" class="toggle-circle right"></rect>
        </g>
        <filter id="goo">
          <feGaussianBlur stdDeviation="10" result="blur" in="SourceGraphic"></feGaussianBlur>
          <feColorMatrix result="goo" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" mode="matrix" in="blur"></feColorMatrix>
        </filter>
      </svg>

    </div>
    <div>Search also by date</div> 
  </div>   
</div>
<h2>Effortless Searching, Simplified for You!
</h2>

<div>
    <form class="form" action="" [formGroup]="searchForm"  (ngSubmit)="onSubmit(searchForm)">
      
   @if (!isSearchDate) {
    <div class="isSearchdate">
    <div class="main">
      <div class="search">
        <input #myInput type="text" matInput formControlName="name" [formControl]="myControl" placeholder="Enter Customer Name or Address" [matAutocomplete]="auto" formControlName="search">
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
            {{ option }}
          </mat-option>
        </mat-autocomplete>
        <div>
        <button  class="btn btn-primary" type="submit">Go</button>
        <!-- <button class="btn btn-primary" (click)="exportBillsToExcel()"> Exportxls </button>
        <button class="btn btn-primary" (click)="generateAuctionPdf()"> Auction </button> -->
      </div>
      </div>

      
    </div>

    <div>
    </div>
  </div>


  @if(isSearchDateAlso){
    <div class="isSearchDateAlso">
    <mat-form-field >


      <mat-label>Enter a date range</mat-label>
      <mat-date-range-input  [formGroup]="range" [rangePicker]="picker">
        <input matStartDate formControlName="start" placeholder="Start date">
        <input matEndDate formControlName="end" placeholder="End date">
      </mat-date-range-input>
      <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    
      @if (range.controls.start.hasError('matStartDateInvalid')) {
        <mat-error>Invalid start date</mat-error>
      }
      @if (range.controls.end.hasError('matEndDateInvalid')) {
        <mat-error>Invalid end date</mat-error>
      }
</mat-form-field>
</div>


  }  

   }   
   @else {
    <div class="newThing">
    <mat-form-field >


      <mat-label>Enter a date range</mat-label>
      <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
        <input matStartDate formControlName="start" placeholder="Start date">
        <input matEndDate formControlName="end" placeholder="End date">
      </mat-date-range-input>
      <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    
      @if (range.controls.start.hasError('matStartDateInvalid')) {
        <mat-error>Invalid start date</mat-error>
      }
      @if (range.controls.end.hasError('matEndDateInvalid')) {
        <mat-error>Invalid end date</mat-error>
      }
</mat-form-field>
<button class="cssbuttons-io-button" (click)="onSubmit(searchForm)">
  Search Date
  <div class="icon">
    <svg
      height="24"
      width="24"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path
        d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"
        fill="currentColor"
      ></path>
    </svg>
  </div>
  
</button>
</div>


<!-- <button class="Datesearch">Submit</button> -->






   }
  </form>
</div>
<div class="buttons">
  <button class="newbutton"mat-raised-button color="warn"  (click)="exportBillsToExcel()">Export xls</button>
  <button  class="newbutton" mat-raised-button color="warn" type="button" (click)="generateAuctionPdf()">Auction</button>
</div>

<div class="results">
  <mat-label id="results"></mat-label>
  <table class="table" mat-table [dataSource]="dataSource">
    <!-- Bill Serial Column -->
    <ng-container matColumnDef="billSerial">
      <th mat-header-cell *matHeaderCellDef> Bill Serial </th>
      <td mat-cell *matCellDef="let bill"> {{bill.billSerial}} </td>
    </ng-container>

    <!-- Bill No Column -->
    <ng-container matColumnDef="billNo">
      <th mat-header-cell *matHeaderCellDef> Bill No </th>
      <td mat-cell *matCellDef="let bill"> {{bill.billNo}} </td>
    </ng-container>

    <!-- Bill Date Column (Moved after Bill Serial and Bill No) -->
    <ng-container matColumnDef="billDate">
      <th mat-header-cell *matHeaderCellDef> Bill Date </th>
      <td mat-cell *matCellDef="let bill"> {{bill.billDate}} </td>
    </ng-container>

    <!-- Customer Name Column -->
    <ng-container matColumnDef="customerName">
      <th mat-header-cell *matHeaderCellDef> Customer Name </th>
      <td mat-cell *matCellDef="let bill"> {{bill.customer?.customerName}} </td>
    </ng-container>

    <!-- Address Column -->
    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef> Address </th>
      <td mat-cell *matCellDef="let bill"> {{bill.customer?.street}}, {{bill.customer?.area}}, {{bill.customer?.district}}, {{bill.customer?.country}} - {{bill.customer?.pincode}} </td>
    </ng-container>

    <!-- Grams Column -->
    <ng-container matColumnDef="grams">
      <th mat-header-cell *matHeaderCellDef> Weight (grams) </th>
      <td mat-cell *matCellDef="let bill"> {{bill.grams}} </td>
    </ng-container>

    <!-- Amount Column -->
    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef> Amount </th>
      <td mat-cell *matCellDef="let bill"> {{bill.amount}} </td>
    </ng-container>

    <!-- Product Description Column -->
    <ng-container matColumnDef="productDescription">
      <th mat-header-cell *matHeaderCellDef> Product Description </th>
      <td mat-cell *matCellDef="let bill"> {{bill.billDetails[0]?.productDescription}} </td>
    </ng-container>

    <!-- Redemption Number Column -->
    <ng-container matColumnDef="RedeemNO">
      <th mat-header-cell *matHeaderCellDef> RedemptionNumber </th>
      <td mat-cell *matCellDef="let bill"> {{bill.billRedemSerial}}{{bill.billRedemNo}} </td>
    </ng-container>

    <!-- Redemption Date Column -->
    <ng-container matColumnDef="redemptionDate">
      <th mat-header-cell *matHeaderCellDef> RedemptionDate </th>
      <td mat-cell *matCellDef="let bill"> {{bill.redemptionDate}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"
        [ngClass]="{'highlight-row': row.redemptionStatus === 'R'}">
    </tr>
  </table>
</div>


<!-- <footer>
  &copy; 2024 Your Company Name
</footer> -->

<app-footer></app-footer>